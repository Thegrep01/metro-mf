diff --git a/dist/commands/bundle/buildBundle.js b/dist/commands/bundle/buildBundle.js
index 0f9977969bd44f9f418dd1ad7d054250097c547e..9ef78a997bfef177a623102531959d5a2d210e74 100644
--- a/dist/commands/bundle/buildBundle.js
+++ b/dist/commands/bundle/buildBundle.js
@@ -53,7 +53,16 @@ async function buildBundleWithConfig(
     );
     throw new Error("Bundling failed");
   }
-  process.env.NODE_ENV = args.dev ? "development" : "production";
+  if (process.env.METRO_FEDERATION_DEV) {
+    // Don't set global NODE_ENV to production inside the monorepo
+    // because it breaks Metro's babel-register ad hoc transforms
+    // when building with args.dev === false
+    process.env.NODE_ENV = "development";
+  } else {
+    // This is used by a bazillion of npm modules we don't control so we don't
+    // have other choice than defining it as an env variable here.
+    process.env.NODE_ENV = args.dev ? "development" : "production";
+  }
   let sourceMapUrl = args.sourcemapOutput;
   if (sourceMapUrl != null && !args.sourcemapUseAbsolutePath) {
     sourceMapUrl = _path.default.basename(sourceMapUrl);
